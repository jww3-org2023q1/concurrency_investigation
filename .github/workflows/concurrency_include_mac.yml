name: Concurrency Test With MacOS

on:
  workflow_dispatch:

jobs:
  primary:
    name: Variation
    runs-on: ${{ matrix.os }}
    strategy:
      fail-fast: false
      max-parallel: 60
      matrix:
        os: [macos-latest, ubuntu-latest, ubuntu-20.04]
        dimA: [a, b, c, d, e, f]
        dimB: [v, w, x, y, z]

    steps:
      - name: Preamble
        shell: pwsh
        run: echo "Started"

      - name: Linux Sleep
        if: runner.os == 'Linux'
        shell: pwsh
        run: |
          echo "Sleeping for 30 seconds"
          Start-Sleep -Seconds 30

      - name: Signoff
        shell: pwsh
        run: echo "done"
